<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ğŸ“± Ù„Ø¹Ø¨Ø© Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‡Ø§ØªÙ</title>
<style>
 body{
   font-family:Tahoma,Arial;
   background:linear-gradient(135deg,#d4f1f4,#f0fdfa);
   text-align:center;
   padding:20px;
   transition:0.5s;
 }
 body.night{
   background:linear-gradient(135deg,#0f172a,#1e293b);
   color:#fff;
 }
 h1{margin-bottom:20px}
 .card{
   background:#fff;
   padding:20px;
   margin:15px auto;
   border-radius:15px;
   box-shadow:0 6px 20px rgba(0,0,0,.08);
   max-width:600px;
   transition:0.5s;
 }
 body.night .card{
   background:#1e293b;
   color:#fff;
 }
 .btn{
   padding:12px 18px;
   border:0;
   border-radius:12px;
   background:#2563eb;
   color:#fff;
   cursor:pointer;
   margin:10px;
   font-size:16px;
   transition:0.3s;
 }
 .btn:hover{background:#1e40af}
 #timer{
   font-size:32px;
   margin:15px 0;
   color:#e11d48;
   font-weight:bold;
 }
 table{
   width:100%;
   border-collapse:collapse;
   margin-top:10px;
 }
 th,td{
   border:1px solid #ccc;
   padding:8px;
   text-align:center;
 }
 body.night th, body.night td{
   border-color:#444;
 }
 .grid{
   display:grid;
   grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
   gap:12px;
   justify-items:center;
   margin-top:15px;
 }
 input{
   padding:8px;
   margin:5px;
   border-radius:8px;
   border:1px solid #999;
   text-align:center;
 }
 /* Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
 #roundBreak{
   display:none;
   margin:20px auto;
 }
 .circle{
   width:120px;
   height:120px;
   border-radius:50%;
   background:#e11d48;
   display:flex;
   align-items:center;
   justify-content:center;
   font-size:28px;
   font-weight:bold;
   color:#fff;
   margin:auto;
   box-shadow:0 0 20px rgba(0,0,0,0.2);
 }
</style>
</head>
<body>
<h1>ğŸ“± Ù„Ø¹Ø¨Ø© Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‡Ø§ØªÙ</h1>

<div class="card" id="setup">
 <h3>ğŸ“ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h3>
 <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†: </label>
 <select id="playersCount">
   <option value="2">2</option>
   <option value="3" selected>3</option>
   <option value="4">4</option>
   <option value="5">5</option>
 </select><br><br>

 <label>Ù…Ø¯Ø© Ø§Ù„Ù…Ø¤Ù‚Øª: </label>
 <select id="timerMinutes">
   <option value="300">5 Ø¯Ù‚Ø§Ø¦Ù‚</option>
   <option value="600">10 Ø¯Ù‚Ø§Ø¦Ù‚</option>
   <option value="900">15 Ø¯Ù‚ÙŠÙ‚Ø©</option>
   <option value="1200">20 Ø¯Ù‚ÙŠÙ‚Ø©</option>
 </select><br><br>

 <div id="playersInputs"></div>
 <button class="btn" onclick="generatePlayers()">âœï¸ Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</button><br><br>
 <button class="btn" onclick="startGame()">ğŸ® Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
 <button class="btn" onclick="toggleTheme()">ğŸŒ— ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹</button>
</div>

<div id="gameArea" style="display:none">
 <div class="card">
   <h2>â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</h2>
   <div id="timer">00:00</div>
   <div id="buttonsArea" class="grid"></div>
 </div>

 <div id="roundBreak">
   <div class="circle" id="breakCircle">15</div>
   <p>â³ Ø§Ø³ØªØ±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</p>
 </div>

 <div class="card">
   <h3>ğŸ“Š Ø§Ù„Ù†Ù‚Ø§Ø·</h3>
   <table>
     <thead>
       <tr><th>Ø§Ù„Ù„Ø§Ø¹Ø¨</th><th>Ø§Ù„Ù†Ù‚Ø§Ø·</th></tr>
     </thead>
     <tbody id="scoreTable"></tbody>
   </table>
 </div>
 <button class="btn" onclick="toggleTheme()">ğŸŒ— ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹</button>
</div>

<script>
let scores=[];
let seconds=300;
let timerInterval;
let breakInterval;
let playerNames=[];
let playersCount=3;

function generatePlayers(){
 playersCount=document.getElementById("playersCount").value;
 let inputs="";
 for(let i=1;i<=playersCount;i++){
   inputs+=`<input type="text" id="p${i}" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ ${i}"><br>`;
 }
 document.getElementById("playersInputs").innerHTML=inputs;
}

function startGame(){
 playersCount=document.getElementById("playersCount").value;
 seconds=parseInt(document.getElementById("timerMinutes").value);
 playerNames=[];
 scores=[];
 
 for(let i=1;i<=playersCount;i++){
   let name=document.getElementById("p"+i)?.value||("Ù„Ø§Ø¹Ø¨ "+i);
   playerNames.push(name);
   scores.push(0);
 }
 
 document.getElementById("scoreTable").innerHTML="";
 playerNames.forEach((n,i)=>{
   document.getElementById("scoreTable").innerHTML+=
     `<tr><td id="name${i}">${n}</td><td id="score${i}">0</td></tr>`;
 });
 
 let btns="";
 playerNames.forEach((n,i)=>{
   btns+=`<button class="btn" onclick="stopTime(${i})">ğŸ“± ${n}</button>`;
 });
 document.getElementById("buttonsArea").innerHTML=btns;
 
 document.getElementById("setup").style.display="none";
 document.getElementById("gameArea").style.display="block";
 
 startTimer();
}

function startTimer(){
 clearInterval(timerInterval);
 timerInterval=setInterval(()=>{
   let m=Math.floor(seconds/60);
   let s=seconds%60;
   document.getElementById("timer").textContent=
     (m<10?"0"+m:m)+":"+(s<10?"0"+s:s);
   if(seconds<=0){
     clearInterval(timerInterval);
     alert("â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!");
   }
   seconds--;
 },1000);
}

function stopTime(player){
 clearInterval(timerInterval);
 scores[player]++;
 document.getElementById("score"+player).textContent=scores[player];
 alert(`ğŸ‰ ${playerNames[player]} Ù„Ù‚Ù‰ Ø§Ù„Ù‡Ø§ØªÙ!`);
 
 // Ø¹Ø±Ø¶ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬ÙˆÙ„Ø©
 startBreak();
}

function startBreak(){
 document.getElementById("roundBreak").style.display="block";
 let breakTime=15;
 document.getElementById("breakCircle").textContent=breakTime;
 clearInterval(breakInterval);
 breakInterval=setInterval(()=>{
   breakTime--;
   document.getElementById("breakCircle").textContent=breakTime;
   if(breakTime<=0){
     clearInterval(breakInterval);
     document.getElementById("roundBreak").style.display="none";
     // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ÙˆÙ‚Øª
     seconds=parseInt(document.getElementById("timerMinutes").value);
     startTimer();
   }
 },1000);
}

function toggleTheme(){
 document.body.classList.toggle("night");
}
</script>
</body>
</html>
